![Architecture](./assets/sprint2_architecture.svg)


<svg width="960" height="480" viewBox="0 0 960 480" xmlns="http://www.w3.org/2000/svg" font-family="Inter, Arial, sans-serif">
  <style>
    .title { font-size: 20px; font-weight: 600; fill: #2d3748; }
    .box { fill: #f8fafc; stroke: #94a3b8; stroke-width: 1.5; rx: 8; }
    .label { font-size: 14px; fill: #1e293b; text-anchor: middle; }
    .arrow { stroke: #64748b; stroke-width: 2; marker-end: url(#arrowhead); }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#64748b" />
    </marker>
  </defs>

  <!-- Title -->
  <text x="480" y="40" class="title" text-anchor="middle">ðŸŒ± Plant Butler â€“ Sprint 2 Cloud Backend Architecture</text>

  <!-- Hardware -->
  <rect x="60" y="100" width="160" height="80" class="box" />
  <text x="140" y="130" class="label">MiFlora / VegTrug</text>
  <text x="140" y="150" class="label">Sensors (BLE)</text>

  <!-- Theengs Bridge -->
  <rect x="260" y="100" width="160" height="80" class="box" />
  <text x="340" y="130" class="label">ESP32</text>
  <text x="340" y="150" class="label">Theengs Gateway</text>

  <!-- HiveMQ -->
  <rect x="460" y="100" width="160" height="80" class="box" />
  <text x="540" y="130" class="label">HiveMQ Cloud</text>
  <text x="540" y="150" class="label">(MQTT Broker 8883)</text>

  <!-- Render Worker -->
  <rect x="660" y="100" width="160" height="80" class="box" />
  <text x="740" y="130" class="label">Render Worker</text>
  <text x="740" y="150" class="label">Node.js + Supabase Client</text>

  <!-- Supabase -->
  <rect x="860" y="100" width="160" height="160" class="box" />
  <text x="940" y="130" class="label">Supabase</text>
  <text x="940" y="150" class="label">Postgres + Auth + Cron</text>

  <!-- Data Arrows -->
  <line x1="220" y1="140" x2="260" y2="140" class="arrow" />
  <line x1="420" y1="140" x2="460" y2="140" class="arrow" />
  <line x1="620" y1="140" x2="660" y2="140" class="arrow" />
  <line x1="820" y1="140" x2="860" y2="140" class="arrow" />

  <!-- Lower Layer: Automations -->
  <rect x="860" y="300" width="160" height="120" class="box" />
  <text x="940" y="330" class="label">Automations</text>
  <text x="940" y="350" class="label">â€¢ Hourly Rollups</text>
  <text x="940" y="370" class="label">â€¢ Latest Metrics Trigger</text>
  <text x="940" y="390" class="label">â€¢ 2-Year Data Purge</text>

  <line x1="940" y1="260" x2="940" y2="300" class="arrow" />

  <!-- Labels -->
  <text x="180" y="200" class="label" font-size="13">(Bluetooth LE)</text>
  <text x="500" y="200" class="label" font-size="13">(MQTT / TLS 8883)</text>
  <text x="740" y="200" class="label" font-size="13">(HTTPS Supabase API)</text>

</svg>
